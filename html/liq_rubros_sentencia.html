<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title> T.T. 6 - Dashboard</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="../estilos/misestilos.css">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous">
    </script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous">
    </script>

    <!--Estilos propios -- -->
    <link rel="stylesheet" href="../estilos/liq_rubros_sentencia.css">

</head>

<body>

    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div id="dismiss">
                <i class="fas fa-times"></i>
            </div>

            <div class="sidebar-header">
                <h4>
                    <!-- <i class="fas fa-cog"></i> -->
                    Herramientas</h4>
            </div>

            <ul class="list-unstyled components">
                <!-- <p>Dummy Heading</p> -->
                <li>
                    <a href="index.html"><i class="fas fa-home"></i> Principal</a>
                </li>
                <li>
                    <a href="#homeSubmenu" class="dropdown-toggle" data-toggle="collapse" aria-expanded="false"><i
                            class="fas fa-check-circle"></i> Control</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#"> Despacho</a>
                        </li>
                        <li>
                            <a href="#"> Sentencias</a>
                        </li>
                        <li>
                            <a href="#"> Interlocutorios</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <!-- <a href="#"><i class="fas fa-dollar-sign"></i> Liquidaciones</a> -->
                    <a href="#pageSubmenu" class="dropdown-toggle" data-toggle="collapse" aria-expanded="false"><i
                            class="fas fa-dollar-sign"></i> Liquidaciones</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu">
                        <li>
                            <a href="#"> Sentencias</a>
                        </li>
                        <li>
                            <a href="#"> Intereses</a>
                        </li>
                        <li>
                            <a href="#"> A.R.T. - Acuerdos</a>
                        </li>
                        <li>
                            <a href="#"> A.R.T. - Sentencias</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fas fa-book"></i> Jurisprudencia</a>
                </li>
                <li>
                    <a href="modelos.html" target="_blank"><i class="fas fa-filter"></i> Modelos</a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-calendar"></i> Entrada en vigencia</a>
                </li>
                <li>
                    <a href="#"><i class="fas fa-file-code"></i> Dev Tools</a>
                </li>
            </ul>

            <!-- <ul class="list-unstyled CTAs">
                <li>
                    <a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download">Download source</a>
                </li>
                <li>
                    <a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article">Back to article</a>
                </li>
            </ul> -->
        </nav>

        <!-- Page Content  -->
        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-cog"></i>
                        <!-- <span> Sidebar</span> -->
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="#"><i class="fas fa-inbox "></i> Mensajes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"><i class="fas fa-folder-open"></i> Abrir</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">xx</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">xxx</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- a partir de acá empieza el contenido propio -->
            
            <div class="container">
                <div class="container-fluid">
                    <div class="">
                        <!-- Inicio RL
                        despido
                        Mejor remuneración
                        Inicio Vacaciones
                        Inicio SAC -->
                        <div  class="m-2">
                            <fieldset class="d-flex justify-content-around">
                                <legend>Datos de la Relación Laboral: </legend>
                                <br>Fecha Inicio: <input type="date" id="dateIRL" ><br>
                                Fecha del Despido: <input type="date" id="dateDespido" value="2020-05-08">
                            </fieldset>
                            <fieldset class="d-flex justify-content-center">
                                <legend>Datos de la Remuneración :</legend>
                                <br> M. R. N. M. H.: <input type="number" id="mrnmh">
                            </fieldset>
                            <fieldset class="d-flex justify-content-around">
                                <legend>Otros Datos :</legend>
                                <br> Cómputo de vacaciones: <input type="date" id="dateVac"><br>
                                Cómputo de S.A.C.: <input type="date" id="dateSAC">
                            </fieldset>
                            <fieldset class="d-flex justify-content-end">
                                <button class="btn btn-success btn-lg" id="btnCalcular">Calcular...</button>
                                
                            </fieldset>
                        </div>
                    </div>

                    <div class="divisor"></div>

                    <table class="table table-hover text-center" id="table">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Rubro</th>
                            <th>Monto</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="245"></th>
                            <td> <p class="first"> Indemnización por antigüedad (art. 245 LCT) </p>
                                 <p class="second 245"></p>
                            </td>
                            
                            <td><span class="result 245"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="232"></th>
                            <td><p class="first"> Indemnización sustitutiva de preaviso (art. 232 LCT) </p>
                                <p class="second 232">asdfasdf </p>
                            </td>
                            <td><span class="result 232"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="233"></th>
                            <td><p class="first"> Integración mes del despido (art. 233 LCT) </p>
                                <p class="second 233">asdfasdf </p>
                            </td>
                            <td><span class="result 233"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="dias"></th>
                            <td><p class="first"> Días trabajados del mes del despido </p>
                                <p class="second dias">asdfasdf </p>
                            </td>
                            <td><span class="result dias"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="vacProp"></th>
                            <td><p class="first"> Vacaciones proporcionales </p>
                                <p class="second vacProp">asdfasdf </p>
                            </td>
                            <td><span class="result vacProp"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="sacProp"></th>
                            <td><p class="first"> S.A.C. proporcional </p>
                                <p class="second sacProp">asdfasdf </p>
                            </td>
                            <td><span class="result sacProp"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_1_25323"></th>
                            <td><p class="first"> Indemanización art. 1, ley 25.323 </p>
                                <p class="second _1_25323">asdfasdf </p>
                            </td>
                            <td><span class="result _1_25323"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_2_25323"></th>
                            <td><p class="first"> Indemanización art. 2, ley 25.323 </p>
                                <p class="second _2_25323">asdfasdf </p>
                            </td>
                            <td><span class="result _2_25323"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="art80"></th>
                            <td><p class="first"> Indemanización art. 80 (art. 45, ley 25.345) </p>
                                <p class="second art80">asdfasdf </p>
                            </td>
                            <td><span class="result art80"></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_8_24013"></th>
                            <td><p class="first"> Indemanización art. 8, ley 24.013 </p>
                                <p class="second _8_24013">asdfasdf </p>
                            </td>
                            <td><span class="result _8_24013" ></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_9_24013"></th>
                            <td><p class="first"> Indemanización art. 9, ley 24.013 </p>
                                <p class="second _9_24013">asdfasdf </p>
                            </td>
                            <td><span class="result _9_24013" ></span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_10_24013"></th>
                            <td><p class="first"> Indemanización art. 20, ley 24.013 </p>
                                <p class="second _10_24013">asdfasdf </p>
                            </td>
                            <td><span class="result _10_24013"> </span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_15_24013"></th>
                            <td><p class="first"> Indemanización art. 15, ley 24.013 </p>
                                <p class="second _15_24013">asdfasdf </p>
                            </td>
                            <td><span class="result _15_24013"> </span></td>
                          </tr>
                          <tr>
                            <th scope="row"><input type="checkbox" name="checkRubro" id="_132bis"></th>
                            <td><p class="first"> Sanción art. 132 bis L.C.T </p>
                                <p class="second _132bis">asdfasdf </p>
                            </td>
                            <td><span class="result _132bis"></span></td>
                          </tr>
                          

                          

                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3" class="text-left">
                                    <button id="addTemplate" class="btn btn-success"><i class="fas fa-plus-square"></i></i></button>
                                    <button id="remTemplate" class="btn btn-danger"><i class="fas fa-minus-square"></i></i></button>
                                </td>
                            </tr>
                            
                        </tfoot>
                    </table>

                    <template id="template">
                        <tr class="otro">
                            <th scope="row"><input type="checkbox" name="checkRubro"></th>
                            <td><input type="text"  placeholder="Rubro..."></td>
                            <td><span class="result"></span></td>
                        </tr>
                    </template>
                </div>
            </div>
            
            

        </div>
    </div>

   

    <div class="overlay"></div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script> -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <!-- Popper.JS -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous">
    </script> -->
    <!-- Bootstrap JS -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
    </script>

    <!-- jQuery Custom Scroller CDN -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js">
    </script>

    <!-- JS propio -->
   

    <script type="text/javascript">
        $(document).ready(function () {
            
            let dateIRL;
            let dateDespido;
            let dateVac;
            let dateSAC;
            let mrnmh;
            let datos = {
                inicio: "",
                despido: "",
                vacaciones: "",
                sac: "",
                rem: "",
                remWSAC: "",
                lastDayOfMonth: "",
                daysWorked: "",
                daysNotWorked: "",
                dialyRemWSAC: "",
                daysOfYear: "",
                };
            
            

            // $("input[type=number]").on("keyup", function(){
            //     datosRL = {
            //         irl: $("#dateIRL").val(),
            //         despido: $("#dateDespido").val(),
            //         vacaciones: $("#dateVac").val(),
            //         sac: $("#dateSAC").val(),
            //         mrnmh: $("#mrnmh").val(),
            //     }
            // })

            

            $("#sidebar").mCustomScrollbar({
                theme: "minimal"
            });

            $('#dismiss, .overlay').on('click', function () {
                $('#sidebar').removeClass('active');
                $('.overlay').removeClass('active');
            });

            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').addClass('active');
                $('.overlay').addClass('active');
                $('.collapse.in').toggleClass('in');
                $('a[aria-expanded=true]').attr('aria-expanded', 'false');
            });

            $("#addTemplate").click(function(){
                //alert("hola")
                $("#table>tbody").append($("#template").html());
                $(window).scrollTop($(window).height()+1000);
            });

            $("#remTemplate").click(function(){
                $(".otro:last").remove();
            });

            $("#btnCalcular").on("click", function(){
                
                $("#table").fadeIn();
                datos.inicio = new Date($("#dateIRL").val());
                datos.despido = new Date($("#dateDespido").val());
                datos.vacaciones = $("#dateVac").val();
                datos.sac = $("#dateSAC").val();
                datos.rem = $("#mrnmh").val();
                datos.remWSAC = (datos.rem / 12 + +datos.rem).toFixed(2);
                datos.lastDayOfMonth = new Date(datos.despido.getFullYear(), datos.despido.getMonth()+1, 0).getDate();
                datos.daysWorked = datos.despido.getDate()+1;
                datos.daysNotWorked = datos.lastDayOfMonth - datos.daysWorked;
                datos.dialyRemWSAC = (datos.remWSAC / datos.lastDayOfMonth).toFixed(2);
                datos.daysOfYear = function getDaysOfYear() {  }
                
            });

            // function dateToNumber(date) {
            //     date = new Date();


            // }

            function dateDif(date1, date2) {
                
                let dif = (date2.getTime() - date1.getTime()) /86400/1000/365;
                console.log(dif);
                let trunc = dif - Math.trunc(dif);
                console.log(trunc);
                if(trunc < 0.30){
                    return Math.round(dif);
                } else{
                    return Math.round(dif) +1;
                }
                
              }

            $('input[type=checkbox]').on('change', function(event) {
                let id = $(event.target).attr("id");
                if ($(event.target).is(':checked') ) {
                    switch (id) {
                        case "245":
                                $("p." + id).fadeIn().text(`${dateDif(datos.inicio, datos.despido)} períodos, multiplicados por la
                                MRNMH de $ ${datos.remWSAC}`);
                            break;
                        case "232":
                                (dateDif(datos.inicio, datos.despido) < 5) ? $("p." + id).fadeIn().text(`MRNMH con SAC ($ ${datos.remWSAC}) por 2`): $("p." + id).fadeIn().text(`MRNMH con SAC (${datos.remWSAC})`);
                            break;
                        case "233":
                                $("p." + id).fadeIn().text(`${datos.daysNotWorked} días restantes del mes del despido, multiplicado
                                por el valor de la MRNMH diaria, $ ${datos.dialyRemWSAC}`);
                            break;
                        case "dias":
                                $("p." + id).fadeIn().text(`${datos.daysWorked} días trabajados del mes del despido, multiplicado
                                por el valor de la MRNMH diaria, $ ${datos.dialyRemWSAC}`);
                            break;
                        case "vacProp":
                                let daysOfHoliday = {
                                    1: 14,
                                    5: 21,
                                    10: 28,
                                    20: 35,
                                }
                                if(dateDif(datos.inicio, datos.despido) >= 1 && datedif(datos.inicio, datos.despido) <= 5){
                                    $("p." + id).fadeIn().text()
                                }
                            break;
                        case "sacProp":
                            
                            break;
                        case "_1_25323":
                            
                            break;
                        case "_2_25323":
                            
                            break;
                        case "art80":
                            
                            break;
                        case "_8_24013":
                            
                            break;
                        case "_9_24013":
                            
                            break;
                        case "_15_24013":
                            
                            break;
                        case "_132bis":
                            
                            break;
                                           
                        default:
                            break;
                    }
                    
                } else {
                    $("p." + id).fadeOut();
                }
            });

            
        });
    </script>
</body>

</html>